var FJ=FJ||{};FJ.NOTIF_EVENT="fjEvent";FJ.NOTIF_NAVIGATION="fjNavigation";FJ.MSG_NAVIGATE="fjNavigate";FJ.MSG_NAVIGATE_UNDO="fjNavigateUndo";FJ.MSG_NAVIGATE_REDO="fjNavigateRedo";FJ.Router=new function(){var c=this,b=" ",a=document.location.href,f=a.indexOf("#"),d=0<f?a.substring(0,f):a,g=function(){var e=a.indexOf("#"),c=a.substring(e+2);return 0<e&&e!=a.length-1?c:b};this.start=function(e){b=e;c.navigateBySlug=new FJ.Notification(FJ.MSG_NAVIGATE,FJ.NOTIF_NAVIGATION,g());setInterval(function(){document.location.href!=a&&(a=document.location.href,c.navigateBySlug.slug=g(),FJ.Application.broadcast(c.navigateBySlug))},100)};this.init=function(){FJ.Application.createMediator("router").update=
function(b){b.type==FJ.NOTIF_NAVIGATION&&(b=b.slug,FJ.Application.slug=b,a=d+"#/"+b,document.location.href=a)}}};FJ.EventDispatcher=function(c){var b=[];this.addEventListener=function(a){-1<b.indexOf(a)||(b.push(a),c&&c(b.length))};this.removeEventListener=function(a){a=b.indexOf(a);if(0>a)return null;c&&c(b.length-1);return b.splice(a,1)};this.dispatch=function(a){for(var c=b.length,d=0;d<c;d++)b[d](a)}};
